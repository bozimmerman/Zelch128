Zelch 128 v2.0a
Copyright (C)1991 Elite Software


                        Appendix A

              Message Maker/Online Seq Editor


    The Message Maker is Zelch's powerful online text
editor.  It is used to create E-Mail to be sent, to write
posts and responses, to write feedback, and to edit already
existing sequential files.  Some of the unique features of
the Zelch editor are: its ability to create 40 and 80 column
text that word wrap properly when read in either mode, its
smart delete mode--the delete key will cause the cursor to
trace its previous movement (if the last key was a cursor
down, the delete would move the cursor up!), and its full
support of commodore color graphics.

    The commands listed in this appendix are accessed when
in the Message Maker by pressing "/" on a blank line
followed by the command key (ie: "/v" to view the text in
memory), or if you wish to access a menu of the commands use
"/" by itself and press the command key when prompted.

    Most commands allow for an optional line range parameter
when being used, such as: "/l10,20" to list lines 10-20. In
the commands below the optional line ranges will be listed
as "/lx,y"--where x is the starting line, and y is the last
line.

Command : Format  Description

Abort   : /a    : Will abort the current editing session
                  leaving the entire file and all changes
                  unsaved.

Save    : /s    : Will save all the text currently in memory
                  to disk as the specified file. If saving
                  an individual file link, no other parts
                  of the file will be affected by the saved
                  changes.

New     : /n    : Clear and erase all text currently in
                  message maker memory so that you may
                  re-enter it.

Edit    : /ex   : Allow you to search for and replace text
                  in line number x. If x is unspecified,
                  line 0 will be selected. The first prompt
                  asks you to enter a string of text
                  exactly as it already appears in the
                  line, while the second prompt asks for
                  the string to replace that text with.

ReWrite : /rx   : Use this command if you wish to completely
                  re-enter line number x. Pressing return
                  without entering anything will leave the
                  line unchanged.


Delete1 : /d-x  : Will erase from text memory the last x
                  lines of the current message.

Delete2 : /dx   : Erase line number x from text memory.

Delete3 : /dx,  : Delete all lines of the message starting
                  with line x.

Delete4 : /dx,y : Delete a range of lines from the text. The
                  range should be from line x to line y of
                  the message.

View    : /vx,y : View the current message exactly as it
                  will appear when saved. You may enter
                  x and y as viewing ranges, though they are
                  purely optional.

List    : /lx,y : List the current text with the line number
                  of each line displayed beside it. As
                  explained above, x and y are optional
                  range line numbers.

Line #s : /t    : Will toggle on and off the message maker's
                  auto line numbers mode. When on, the line
                  currently being entered will be displayed
                  to the right of it.

W. Wrap : /w    : Toggle the auto word wrap feature on and
                  off. When on, the [clr] key remains
                  inoperative and text is automatically
                  formatted for 40/80 viewing. When off,
                  the [clr] key may be entered, and the
                  cursor may not move beyond the last
                  column. Word wrap should be turned off
                  for cursor movements, and all graphics
                  entries and uploads.

Graphics: /u    : Toggle uppercase commodore graphics mode.
                  This should be basically kept off at all
                  times except when the user wishes to
                  enter [shift] key graphic characters.
                  This command will only toggle on if
                  the user is in graphics mode.

Center  : /cx,y : Will center a range of text from line x to
                  y for your current column setting. If
                  x and y are omitted, the entire text will
                  be affected. This command may not work
                  properly on lines containing color or
                  cursor movements.

Insert  : /ix   : Insert one blank line before line number
                  x. If x is unspecified, the line will be
                  inserted at the beginning of your message.

Get     : /g    : Lets users with SysOp access read in
                  specified files for use in the editor.

Put     : /p    : Allows the user to save a portion of the
                  text as a separate filename on any drive.

Output  : /o    : Permits SysOps in local mode to make hard
                  copies of the work text.

Bit-edit: /*x   : Lets SysOps in local use the bit edit
                  feature for text changes on line x.

Bit-list: /bx,y : Lists the line range in bit mode.



                        Appendix B

     T$(x) variables defined from the "sys.text" file.


Line #   Description

  1  Space to abort/CLR to pause (displayed before most
     SEQ files)
  2  "Filename: " prompt for reading files
  3  "Device Number: " prompt for drives unit number (8-30)
  4  "Drive/LU: " prompt for drive number (0-254)
  5   Program (module) not found error message
  6  "Enter handle or user ID: " prompt (mail or user edit)
  7  Searching message (during user searches, etc.)
  8  Not found (part of above search)
  9  System time expired
 10  Menu not found error message
 11  Max calls exceeded
 12  You have no mail
 13  "You have mail, read it now (y/n)? " prompt
 14  Next message (during mail read)
 15  "No more mail, delete all unheld messages (y/n)?"
 16  File not found (SEQ editor)
 17  File link not found (SEQ editor)
 18  Loading... (SEQ file)
 19  "Which file link? " prompt
 20  Invalid password (for password opcode)
 21  Color Graphics mode enabled
 22  ASCII mode enabled
 23  Linefeeds on
 24  Linefeeds off
 25  "Subject of chat request: " prompt
 26  Paging sysop (will add "."'s when paging)
 27  The page signal is now off (only if toggle paging
     is used)
 28  "DOS Command: " prompt
 29  "Filemask (return=*): " prompt
 30  "Character Mask (return=*): " prompt (for directories)
 31  "Pattern to match or starting ID (return=1): " prompt
 32  "Enter new one liner: " prompt
 33  "Flag to set (A-Z): " prompt for set flag opcode
 34  Not enough credits for check system credits opcode
 35  Connection, hit return
 36  Press your backspace/delete key
 37  "Need linefeeds (y/n)? " prompt
 38  "Enter your handle or user ID number: " prompt
 39  "Apply for access? " prompt if user not found
 40  "Enter your password: " prompt
 41  Invalid user information or password
 42  Loading user information...
 43  No empty accounts (shown to new users if all
     accounts are full)
 44  "Enter your handle (16 characters max): " prompt
 45  Checking for duplicate handle...
 46  That handle is already being used
 47  "Enter your real name (16 characters max): " prompt
 48  "Enter your voice phone number: " prompt
 49  "Enter a password to use: " prompt
 50  "Are you using 80 columns (y/n)? " prompt
 51  Finding an open account
 52  Your account ID number is: \?id\, hit return
 53  "Is all info correct (y/n)? " prompt
 54  Saving your application...
 55  "Move how many days (ex: +3 or -7): " prompt (last
     call date)
 56  Entering message base
 57  "Which subboard? " prompt for change message bases
 58  Access denied (when access not allowed to a message
     base)
 59  No more messages/That was the last message
 60  "Read message #: " prompt for read opcode
 61  That message has been deleted
 62  "Subject of post: " prompt
 63  "Start at message #: " prompt
 64  "Erase this message and all replies (y/n)? " for
     delete message
 65  "Which UD sig? " prompt for change transfer bases
 66  Access denied (when access not allowed to a UD base)
 67  Entering UD base
 68  "Enter filename: " prompt for upload and download
 69  "Filetype P)RG, S)EQ, W)ORDPRO? " prompt
 70  Go to send mode!
 71  Error--transfer aborted
 72  Error--standby, validating disk (splat file, etc)
 73  Sorry, not enough UD block credits
 74  Go to receive mode!
 75  Go to PUNTER multi-send mode!
 76  Enter filenames, return to begin transfer (for
     multi-down load)
 77  Go to PUNTER multi-receive mode!
 78  X=Abort, L=Set auto-logoff, RETURN=start transfer
 79  "Enter topic letter: " prompt for voting booth
 80  Finding an open topic...
 81  All topics are being used
 82  Writing topic, clearing ballot box...
 83  "Edit voting text: " display
 84  Counting ballots... (when tallying votes to show
     results)
 85  "Your choice: " prompt for vote
 86  Recording your vote...
 87  You may not post another message on this subboard
     during this call.
 88  SysOp online, please hold... (when accessing online
     sysop utilities)
 89  Invalid network destination (invalid letter)
 90  C)lear or S)et flag?
 91  You must be in ASCII.
 92  ANSI off.
 93  ANSI on.
 94  Are you using ANSI color?
 95  Edit which item (return=continue)  (for new user apps)
 96  x Messages with new activity
 97  Message totals
 98  New replies...
 99  "Jump to reply #" prompt
100  Scanning...
101  Reply to "topic":  (reminds users of subject of
     original post when replying)
102  Kill this reply (y/n)?
103  Killing...
104  Would you like to answer the questionnaire?
105  Which newsfile (A-Z)?
106  Newsfile not found, appending... (creating process)
107  No News
108  No New News
109  No U/D file description slots available at this time
110  Describe file to be uploaded:
111  You've reached the maximum number of files.
112  No files selected.
113  Transfer complete.
114  Transfer aborted.
115  Auto-Logoff flag set.
116  Punter or Xmodem (p/x)?
117  Examining directories... (create u/d desc file)
118  No files on record.
119  Which system to network to (A-Z)?
120  Enter handle to send network mail to:



                        Appendix C

             Required System Sequential Files


    The files listed below are "hard wired" into the system.
That means that at one point or another the BBS will either
look for, or create them.

Filename                            Description of file

"sys.text"          Boot disk       This file must be on
                                    your boot disk.  It
                                    contains the text for
                                    the BBS's definable
                                    strings.

"sys.variables"     Boot disk       This file must also be
                                    on your boot disk.
                                    It contains some very
                                    important system info,
                                    such as drive
                                    configuration, modem
                                    type, etc.

"sys.errorlog"      System Data     A log of BASIC errors
                    Files Drive     which occurred in
                                    the main BBS, or
                                    in a Zelch specific
                                    module.

"sys.userlog"       System Data     The log of users who
                    Files Drive     have called your system
                                    since it was last
                                    deleted. If the extended
                                    log flag is set for the
                                    users logged, this will
                                    also contain the a list
                                    of commands they used.

"sys.msg help"      System Data     A list of the commands
                    Files Drive     available to the when
                                    when the user types "/h"
                                    from the message maker.

"sys.news"          System Data     Your system news.
                    Files Drive

"sys.welcome"       System Data     A file welcoming the
                    Files Drive     user to the BBS after
                                    they have logged on.

"mail. x"           E-Mail Drive    The mailfile for user ID
                                    number x.



"sys.feedback"      Feedback Drive  Messages sent to the
                                    sysops using the
                                    feedback op-code.

"sys.new user"      System Data     This file contains all
                    Files Drive     of the new user
                                    applications.  Use the
                                    read new user
                                    applications op-code to
                                    view this file.

"sys.title"         System Data     Color graphics title
                    Files Drive     screen.  If more than
                                    1, will appear as:
                                    "sys.title #" where
                                    "#" is a random number.

"sys.title/a"       System Data     Ascii version of above
                    Files Drive     file.  Will appear as:
                                    "sys.title #/a".

"sys.new msg"       System Data     Introduction message to
                    Files Drive     new users, usually
                                    system rules, etc.

"sys.new app"       System Data     One liner questions (up
                    Files Drive     to 200) that the system
                                    asks all new users if
                                    the file exists.
                                    Responses are stored in
                                    the "sys.new user" file.

"sys.sig a title"   Current Msg     Introduction to message
                    Base Drive      base (sig) A.

"msg.a 1"           Current Msg     Message base A, message
                    Base Drive      #1 and all of its
                                    responses.

"sys.u/d a title"   Current U/D     Introduction to U/D base
                    Base Drive      A.

"vote.topic a"      Voting Booth    Link 0=Possible answers
                    Topic Drive     for topic, link 1=
                                    vote results.

"vote.text a"       Voting Booth    The actual question/text
                    Topic Drive     for topic A.

"sys.automessage"   System Data     This file will be read
                    Files Drive     immediately after the
                                    "sys.welcome" file.
                                    It is usually a user-
                                    written message.

"sys.zos help"      System Data     Help file for the ZOS
                    Files Drive     disk interface.

"sys.script"        System Data     Monster Mode
                    Files Drive     instruction file.



                        Appendix D

              Writing Zelch Specific Modules


    This section contains information on writing Zelch
specific modules-- that is, modules that are written using
various BBS routines and variables.


Part I: System Variables

Arrays used                     m(x)   Numeric variables
pl(26)   Posts this call          x=0  Modem type
t$(100+) Text strings               1  Extended log default
m(20+)   System numbers             2  Monster Mode hour
d(10+,1) System drives              3  All system up-case
o$(20+)  System work strings        4  Carrier detect bit
o(20+)   System work numbers        5  Hangup (poke 56577)
u$(10+)  User data                  6  Hangup (poke 56579)
u(5+)    User numeric data          7  Pickup (poke 56577)
tt$(200) Message maker/work array   8  Pickup (poke 56579)
ui$(500) Handles of all users       9  Idle baud rate
m$(30,4) Current menu data         10  New user blocks
cd(26,1) Time and call limits      11  New user credits
p0$(75)  Extended log storage      12  Default weed protect
mr(50)   Number of responses/msg   14  Max Users
mn$(50)  Activity dates for msgs   15  # credits/response
mx(30)   SysOp work array          16  # ascii titles
                                   17  # color titles


o$(x)  System string variables  o(x)   Numeric data
  x=1  On at time                 x=0  Calls since boot
    2  Date compare string          1  Xfer logoff flag
    3  Expanded date                2  Number of feedback
    4  Expanded last call date      3  (expansion)
    5  Message header string        4  Calls ever
    6  Last menu loaded in          5  Logged errors
    7  Hotkeys for menu             6  New users
    8  ASCII prompt                 7  GFX mode flag
    9  Graphics prompt              8  Message line limit
   10  Menu 3 letter identifier     9  Edit seq file flag
   11  Last program loaded         10  Which link to save
   12  System one liner            11  Msg Maker abort flag
   13  Command for jump            12  Msg Maker save mode
   14  Modem initialization        13  Menu flag
   15  Previous menu               14  Logoff during e-mail
   16  Current menu                15  Relogon flag
   17  Logon compare string        16  Screen blanking flag
   18  ZapTerm initialization      17  U/D baud pters
   19  Main menu                   18  "            "
   20  SysOp utility menu          19  Xfer protocol
   21  Default ASCII color         20  At prompt flag
   22  Anonymous access
   23  Current protocol


u$(x)  User data variables      u(x)   User Numericals
  x=1  Handle                     x=1  Block credits
    2  Password                     2  System credits
    3  Real name                    3  Default baud
    4  Phone number                 4  Number of posts
    5  Access level                 5  Number of email
    6  Last call info
    7  Access flags
    8  Info flags
    9  Calls today
   10  Join/Unjoin


d(x,y) y=0 for unit, y=1 for drive/LU
  x=0  System prg files drive       1  System data files
    2  Voting topics                3  Temp usage
    4  User data files              5  E-Mail drive
    6  Feedback                     7  Current message base
    8  Current U/D drive            9  Menus drive
   10  U/D descriptions            11  Expansion drive


System work and temporary variables used throughout the
program:

a$, c$, i$, o$, w0$-w9$, a, d, e, i, u, w0-w9, x, y


Other variables:

f$ = Filename                   f0$= Secondary filename

m1$= Op-Code work variable      m2$= Data field temp
m3$= Data field work variable   m4$= Current message base
m5$= Message base subop flag    m6$= Last caller or sub name
m7$= Last logoff or sub letter  m8$= File description string

n$ = Name of your BBS           r$ = chr$(13)
sp$= String of 100 spaces       t$ = Mins remaining online
u2$= U/D subop flag

ba = Current baud               d0 = Secondary drive/LU
d1 = 3rd Unit                   d2 = 3rd drive/LU
id = Callers system ID number   l  = current line in editor

m0 = Global read new loop       m1 = Current message base
m2 = Max messages               m3 = Current # of messages
m4 = Current post position      m5 = Current message number
m6 = Current reply              m7 = Read new flag
m8 = Abort read new flag        m9 = Read new loop variable

u0 = Secondary unit             u1 = Current u/d section
u2 = Min. blocks for u/d        u3 = U/D Credit ratio
u4 = Max. files for u/d         u5 = Global read end
u6 = Variable print use         u7 = Msg base cont flag


Part II: Module requirements

o  Modules must start at line 30000, which MUST contain
   "sys15625".
o  Line 30010 MUST be the first line of your code.
o  You must use the BBS input and output routines (they
   will handle carrier detect and time limit checks).
o  Modules must be under 100 blocks in length.


Part III: "bbs.main" Commonly used routines

Line   Description

   4   Output o$ to modem and screen.
   5   Limited input (uppercase, max length set as x)
   6   Standard input (text returned in i$)
   8   Get a$--sysop menu is accessible if at prompt
   9   Output 1 character (a$)
  10   Numeric input as i, text as i$.
  13   Hangup/Disconnect routines
  18   Pickup phone
  23   Load a module named i$ from unit (u), drive/lu (d)
  25   Read file f$ from unit (u), drive/lu (d)
  28   Limited get routine c$=possible keys, a$=key
       pressed
  30   Print o$ on screen at positions x and y
 100   Update all window data
 250   print o$ status/chat request reasons in bottom
       window
 300   Update only chat and grfx flags on window
 400   Update time and date variables
 450   Change baud, i=baud to change to
 600   Logoff routine
1000   Message maker (f$=filename, u=unit, d=drive/lu,
       o(12)=0/append or create, 1/rewrite, 2/edit link
       (o(10)=link#)



                        Appendix E

               Memory Usage and Organization


General memory usage:

0e00-0e40  Sprite used for the 40 column cursor
1300-1bff  Transfer protocols
1c00-1dff  Transfer buffers
1e00-1fff  Temporary buffer area for ML data storage
2000-39ff  System ML (described in Appendix E)
3a00-3aff  ANSI tables
3b00-3cff  ASCII tables
3d00-3fff  Interrupts routines

System flags:

2816 (0b00) Temporary storage
2817 (0b01)
2818 (0b02) Basic pointers
2819 (0b03)
2820 (0b04)
2821 (0b05)
2822 (0b06) Module overlay/underlay flags
2823 (0b07) SysOp local mode flag (1=on)
2824 (0b08) Time limit exceeded (0=yes)
2825 (0b09) Amount of time remaining in minutes
2826 (0b0a) T.O.D. Clock compare byte
2827 (0b0b) Logoff flag (1=force logoff)
2828 (0b0c) i$ and a$ rest byte
2829 (0b0d) Graphics/ASCII flag (0=ASCII mode)
2830 (0b0e) ML Chat mode flag (1=Currently in chat mode)
2831 (0b0f) Uppercase input flag (1=on)
2832 (0b10) Temporary ml storage for A
2833 (0b11) "                      " X
2834 (0b12) "                      " Y
2835 (0b13) Pointer to current color in color cycle
2836 (0b14) Defined color #1
2837 (0b15) "           " #2
2838 (0b16) "           " #3
2839 (0b17) "           " #4
2840 (0b18) "           " #5
2841 (0b19) "           " #6
2842 (0b1a) "           " #7
2843 (0b1b) "           " #8
2844 (0b1c) Mask output for passwords (1=yes)
2845 (0b1d) Linefeeds (1=on)
2846 (0b1e) Current column number for input routine
2847 (0b1f) # Characters before line link (default=120)
2848 (0b20) 80 column word wrap work byte
2849 (0b21) General word wrap work byte
2850 (0b22) Word wrap flag (1=on, 0=stop at end)
2851 (0b23) Chat mode work byte (stores time remaining)
2852 (0b24) Carrier detect bit
2853 (0b25) Carrier detect value
2854 (0b26) High-byte/Low-byte for file block count
2855 (0b27)
2856 (0b28) High-byte/Low-byte for blocks free on disk
2857 (0b29)
2858 (0b2a) Number of files counted in count file routine
2859 (0b2b) ASC() value of character pressed during hot-key
            output (0=none)
2860 (0b2c) Temporary work byte for hot-keys
2861 (0b2d) X position of text for "on window" display ml
2862 (0b2e) Y position of text for "on window"
2863 (0b2f) Current year
2864 (0b30) Storage space for "on window"
2865 (0b31)
2866 (0b32)
2867 (0b33)
2868 (0b34)
2869 (0b35)
2870 (0b36)
2871 (0b37)
2872 (0b38)
2873 (0b39)
2874 (0b3a)
2875 (0b3b)
2876 (0b3c)
2877 (0b3d)
2878 (0b3e)
2879 (0b3f) Current month
2880 (0b40) Day of month
2881 (0b41) # days in January
2882 (0b42)           February (accounts for leap years)
2883 (0b43)           March
2884 (0b44)           April
2885 (0b45)           May
2886 (0b46)           June
2887 (0b47)           July
2888 (0b48)           August
2889 (0b49)           September
2890 (0b4a)           October
2891 (0b4b)           November
2892 (0b4c)           December
2893 (0b4d) (not used)
2894 (0b4e) (not used)
2895 (0b4f) Flag 0=add a line link and exit input, 1=wait
            for return
2896 (0b50) Chat page flag (0=off, 1=on, 2=waiting for
            clear)
2897 (0b51) Temporary storage
2898 (0b52)
2899 (0b53)
2900 (0b54)
2901 (0b55)
2902 (0b56)
2903 (0b57)
2904 (0b58)
2905 (0b59)
2906 (0b5a)
2907 (0b5b)
2908 (0b5c)
2909 (0b5d)
2910 (0b5e)
2911 (0b5f)
2912 (0b60)
2913 (0b61)
2914 (0b62) Date check flag for interrupts
2915 (0b63) 80 column user flag (1=80 columns)
2916 (0b64) Trap Online Basic byte
2917 (0b65) Line numbers in editor (1=on)
2918 (0b66) 80 column word wrap work byte
2919 (0b67) 40 column word wrap work byte
2920 (0b68) Last character sent by output
2921 (0b69) Basic pointers for assigning variables
2922 (0b6a)
2923 (0b6b) Line formatting flag for output (CTRL-H's)
2924 (0b6c) Displayable character flag used by input ml
2925 (0b6d) All system up-case flag (1=on)
2926 (0b6e) Character mask for directory routine
2927 (0b6f) Temporary storage for online basic
2928 (0b70)
2929 (0b71) Online basic active (1=yes)
2930 (0b72) Direct mode flag (0=yes)
2931 (0b73) Exit online basic (1=yes)
2932 (0b74) Device number for basic program
2933 (0b75) Drive/LU for basic program
2934 (0b76) Temporary storage for basic filename
2935 (0b77)
2936 (0b78)
2937 (0b79)
2938 (0b7a)
2939 (0b7b)
2940 (0b7c)
2941 (0b7d)
2942 (0b7e)
2943 (0b7f)
2944 (0b80)
2945 (0b81)
2946 (0b82)
2947 (0b83)
2948 (0b84)
2949 (0b85)
2950 (0b86)
2951 (0b87) Temporary "msg basic pointers"
2952 (0b88)
2953 (0b89) Message Basic flag (1=on)
2954 (0b8a) NO Message Basic flag (0=supress)
2955 (0b8b) Message Basic work bytes
2956 (0b8c)
2957 (0b8d)
2958 (0b8e) Message Basic list suppressor
2959 (0b8f) Pause prompts flag (1=yes)
2960 (0b90) Monster Mode hour
2961 (0b91) Monster Mode "do" flag (1=do) (2=running)
2962 (0b92) Line number for pause prompts
2963 (0b93) Online basic vectors
2964 (0b94)
2965 (0b95)
2966 (0b96)
2967 (0b97)
2968 (0b98)
2969 (0b99)
2970 (0b9a)
2971 (0b9b) Copyfile work bytes
2972 (0b9c)
2973 (0b9d) Idle timer byte
2974 (0b9e) Idle minutes (0=unlimited)
2975 (0b9f) "drecfile" blocks
2976 (0ba0)
2977 (0ba1) "drecfile" length of rel file
2978 (0ba2) Access level for current user
2979 (0ba3) ANSI flag (1=on)
2980 (0ba4) "direc" work byte
2981 (0ba5) ANSI work byte



                        Appendix F

                 Machine Language Routines


    The following are the ML routines, their SYS addresses,
and a description on how the user who wishes to write Zelch
specific modules may access and use them.

15616 ($3d00) SETUP

    This is the first ML routine executed by the system
which initializes various parts of the BBS and activates the
interrupt routines.

15619 ($3d03) LOCKUPS

    Executed every 60th of a second, this is the heart of
the system and the performer of the most basic BBS
functions. This routine updates the user time remaining, and
updates the date, month, and year should it change. If the
user online runs out of time or drops carrier, this is the
routine which sets the logoff flag ($0b0b).

15622 ($3d06) OVERLAY

    Used to setup the system for the load of a Zelch
specific module, this routine will set the start of basic to
the end of the main BBS module (bbs.main) and set the
overlay/underlay flag.

15625 ($3d09) UNDERLAY

    After a Zelch specific module has been loaded, the first
line of the module should execute this ML routine which
resets the original BASIC pointers before the OVERLAY
routine was executed.

15628 ($3d0c) CURSOR

    This routine will update the 40 column cursor (the
sprite) and move it to the current cursor position. It is
executed automatically by the ML input routine.

15631 ($3d0f) ONWINDOW

    This routine interfaces with the system BIGOUT ml
routine to send the o$ string to any part of the screen (ie:
in the windows if desired). The X and Y positions are poked
and o$ is defined before this routine is executed.

15634 ($3d12) CLEAR1

    This one has quite a few functions, but in the BBS it is
SYSed just before executing a CLR basic command. It stores
the status of the the BBSs variables so that CLEAR2 can
restore them.

15637 ($3d15) CLEAR2

    Restores the basic variables back to the pointers set
aside by the CLEAR1 routine. Used in the BBS right after a
CLR command.


The MAIN ML routines:

8192 ($2000) GETIT

    An often used routine which accesses the GETINE routine
below and interfaces with basic through a buffer to create
the variable a$. After execution, a$ will contain the
character typed by either the user online or the local user.

8195 ($2003) GETINE

    The most often used routine in the system, this routine
is accessed almost exclusively by other ML routines. It will
scan the keyboard first for a key being pressed. If a key is
pressed it will translate for upcase mode and any other
parameters, and store the result in memory location 254. If
no key was pressed on the keyboard, it will scan the modem
channel for a keypress. If any was pressed, the system will
also translate for upcase mode, ascii, and any other input
masks and/or translations. Very few keys are actually masked
under normal circumstances, though the HOME key will only be
accepted if the word wrap flag is off.

8198 ($2006) SEND

    Another routine used most often by other ML routines,
this will take the character found in memory location 254
and send it to both screen and modem. All necessary
translations and masks are made before the character is
sent.

8201 ($2009) INPT

    The compliment to the GETIT routine, this will allow the
user to input an entire line of text or graphics and wait
for the return key to be hit (or 120 characters). The text
entered will then be placed into the variable i$ for BASIC
use. There are many flags and settings which will affect the
way this routine will work for you. When set, word wrap will
be automatic.

8204 ($200c) BIGOUT

    SYSing this routine will take the text stored in the
variable o$ and send it to both screen and modem. If the
last character in the variable is a control-c, a carriage


return will not be sent, otherwise one will. This routine is
also the one affected by the system upcase flag. Extra
returns may be added in the text by inserting control-K's
into the line.

8207 ($200f) CHATMODE

    Although chat mode is automatically entered when the
[ESC] key is hit from the INPT, GETIT, or GETINE routines;
you may also execute it automatically from this SYS.

8210 ($2012) FILESEND

    If a SEQUENTIAL file using channel 2 is opened, this
routine will send the contents to both screen and modem. The
spacebar may be used to abort, and the [HOME] key to pause.
This routine will abort at the end of files, and at the end
of file links!

8213 ($2015) FILEGET

    This routine is accessed by the FILESEND routine when
the spacebar is used to abort. It simply reads in the
contents of a sequential file using channel 2 until it
either reaches the end of the file, or reaches the end of
the file link. It's used by the BASIC to skip over links for
various reasons.

8216 ($2018) TIMEVAR

    This routine reads the current time of day and puts it
into the variable i$. The format used is "HH:MM?m" (ie:
"08:34pm").

8219 ($200b) DIREC

    If the directory of a drive is opened using channel 2
and secondary device 0, this routine will display it to both
screen and modem. If specified, it will also mask the
character mask character. Spacebar may be used to abort the
display, and the home key will pause.

8222 ($200e) INLINE

    And yet another drive related command! This one reads in
one line of text from an open sequential file using channel
2 and places the resulting text into the variable i$. The
advantage this routine has over the BASIC "input#2,i$"
command is that this routine accepts commas and semicolons.

8225 ($2011) BLOCKS

    Like DIREC, this one is accessed with a channel 2 open
directory using secondary device 0. Another necessity is
that a filemask specific to the one file being accessed.
This routine will read in and poke the number of blocks for
that file, and the number of blocks free on the disk as
well.

8228 ($2014) COUNTFILE

    This is the last of the directory format routines. After
opening up a directory (Ch 2, SD 0) with or without a
filemask, this routine will count the number of files in the
directory and poke the result into memory.

8231 ($2017) ZAPTERM

    This is the terminal mode part of the Zapterminal
module, the description of which is where you'll find
details on using it.

8234 ($201a) SETPOT

    This is the first of the On-Line basic routines and is
used as a prep routine for storing the current system and
zero page pointers, flags, and values so that the correct
position in the BBS will be returned to.

8237 ($201d) DEFFIX

    This routine is accessed exclusively by INPT and GETIT.
It resets basic pointers changed by those routines.

8240 ($2020) SETBAS

    SYSing this routine will turn on Online basic mode where
BASIC input and print commands will work online.

8243 ($2023) OFFBAS

    Turns off online basic and returns to the spot in memory
where the SETPOT routine was executed. Normally accessed by
entering direct mode when OnLine basic is running in
"program" mode.

8246 ($2026) MSGFIX

    Used exclusively by GETINE, this is a subroutine to
interpret and execute display codes, or message basic
codes.

8249 ($2029) REST

    This is a vector to the routine accessed by INLINE,
GETIT, and INPT to set up their respective variables.

8252 ($202c) DEFINE

    The complement to REST, this works with the other
variable creating routines to perform their ultimate
functions.

8255 ($202f) COPYFI

    This routine is used to copy a file (any type) open with
channel number 2 to the file using channel number 3.
Relative files are copied a record at a time while
sequential, program, and other types are copied
sequentially.

8258 ($2032) DRECFILE

    Used by the U/D and offline copy modules to read in
filenames and filetypes into i$.  Directories should be
opened as channel 2 and secondary device 0.  Reads should
also be proceeded with a pair of "get#2,a$"s.



                          Glossary


ANSI (American National Standards Institute):  This term
refers to the IBM color graphics emulation mode supported by
Zelch.  It contains 8 standard colors and several screen
controls.

ASCII (American Standard Code for Information Interchange):
Communication mode devised to allow communications between
computers of different types.  It allows use of upper and
lowercase characters as well as all of the standard
punction.

Access:  Areas that the user has permission to use,
determined by access flags and levels.

Access Flags:  26 switches that may be set or unset.  They
may be checked with special access flag op-codes.

Access Level:  Security clearance for the various functions
of your BBS.  Most systems have at least three levels,
including:  new user (very little access to commands),
validated user (access to everything except sysop
functions), and sysop access (has ability to change the
system).  You may designate any letter (A-Z) to any access
level-- with one exception:  access level A is reserved for
new users.

Account:  All of the user information for one user.

Account Number:  The record number in the user relative file
that contains all of the caller's information (including
handle, real name, password, etc.)  This number is also used
to file E-Mail.

Automaintenance:  Another name for Monster Mode-- this
executes once per day at the specified time, and performs
system cleanup such as:  inactive user deleting, news
deletion, disk validation, etc.

Baud Rate:  This is the speed at which your modem is
communicating with the remote modem.  It is generally
referred to in BPS or bits per second.

Boot Disk:  This is a copy of the disk that came with the
documentation.  It is the one that has your serial number
written on the front label.

Caller:  A person connecting to your system.  Sometimes
interchangable with "user".

Carrier:  The signal sent constantly between modems when
online.  When this signal is interrupted, the modem hangs
up.

Character Mask:  First character of filenames that should
not be displayed when listing a disk directory.  This is
used to suppress the U/D letter appended to U/D base
transfers.

Color Cycle:  The defined pool of 8 colors from which a
color is taken whenever a CONTROL-1 (black) appears in the
text to be displayed.  The pattern generally flow from one
color to the next in an eye catching arrangement.

Command:  This refers to the key used to access a group of
op-codes, and to the op-codes themselves.  When the key is
pressed the op-codes will execute in sequence.

Configuration:  Collection of files and menus found on your
"configurations disk," that, when unpacked form a particular
BBS.

DOS (Disk Operating System):  This word refers to commands
that your drive will recognize when sent in the form of:
open15,8,15,"<command>":close15

Datafield:  Information used by the op-codes as parameters
for certain tasks.  This information sometimes includes
device and drive/LU numbers, filenames, etc.

Device:  This is the unit number of the disk drive to be
accessed.  Valid unit numbers range from 8 to 30.

Display Code:  Code that can be placed within text perform
certain operations.  See also message basic.

Download:  Transferring of a file from the BBS to the caller
using the last protocol loaded.

Drive/LU (Logical Unit):  Used mostly in the selection of
partitions on CMD and Lt Kernel hard drives.  Valid
drive/LU's range from 0-9 on Lt Kernels and 0-254 on CMDs.
This is normally 0 for single floppy drives.

E-Mail:  Electronic mail from one user on your BBS to
another.  These messages can only be read by the receiving
user and are therefore private.

File Link:  A portion of a sequential file such as a
specific news file found in the larger news sequential file.
Link 0 would be the first newsfile, link 1 the second, and
so on.

Filemask:  Ability to view selective directories with
wildcard searches using "*" and "?".  For example: "prg.*"
would look for files that begin with the prefix "prg.".  You
can also perform file-type directories with "*=s" where all
files of the type "s" (sequential) would be selected.

Gfiles:  Short for general text files.  These usually
contain jokes, bbs lists, etc.

Handle:  Pseudoname of the caller.  Can be compared to CB
handles that allow you to assume a different identity.

Idle Timer:  This is the counter used to boot users offline
should they sit for more than the amount of time specified
without pressing any keys.

Linefeeds:  Some ASCII terminals require this to be sent
with the standard carriage return character.  It prevents
text on their end from printing over itself.

Logical Unit:  See drive/LU.

Logoff:  The process whereby a user leaves the system.

Login:  The user's entry onto the system by correctly
aswering the Handle/ID and the Password prompts.

Logon:  Synonym for Login.

Menu:  The file containing the list of commands available by
the user, the data relating to the commands, the prompts for
that area of the board, and other data.

Menu Code:  The data bits for menus which inform the system
whether or not the menu is automatically displayed when
loaded, and what commands (if any) are automatically
executed.

Menu Identifier:  A three letter code uniquely describing
each menu.

Message:  Usually refers to the collection of posts, or
subject files found in your message bases.  May sometimes
refer to pieces of E-Mail as well.

Message Base:  Also referred to as SIG or Subboard, this is
an area of your board where messages are posted on a related
subject or theme.

Message Basic:  (A.K.A.  Display Codes) Commands which may
be embedded in lines of text, prompts, or files which
display variables, pieces of data, or perform functions;
they are usually surrounded by the "\" character.  You may
find a complete list of the display codes on your quick
reference sheets.

Module:  A program that is used with the BBS which does not
have to remain in memory at all times.  Modules are
typically written Zelch-specific and are preceeded on your
directory with the prefix "prg.".

Monster Mode:  See automaintenance.

Networking:  The process by which mail and other messages
are sent by a BBS program from one system to another.

Offline Editor:  Also called the System Editor, this is the
program accessable by entering option 2 after loading and
running the program "zelch".

Op-code:  A specific and unique operation of the BBS.

Op-code routine:  Closely related to the "command", this is
a group of op-codes which may not be directly accessed by
the user because it has a lowercase letter.  Op-code
routines have access levels and commands letters, but do not
have descriptions.

Op-code subroutine:  See Op-code routine.

Parameters:  Data required to assist in the operation of BBS
functions.

PETSCII:  Commodore Business Machines standard codes for
its character set.  These codes were introduced around the
time of the Commodore PET computer.

Pfiles:  Synonym for module.

Post:  A single subject message which may or may not contain
related replies, that are found in the message bases.

Prompt:  A line of text which suggests to the user that
he/she should type in a command letter.

Protocols:  A communication checksum system used in the
transfer of files to and from the system.  The transfer
protocols Punter and X-Modem are supported by Zelch 128.

REU (Ram Expansion Unit):  A device which, when attached to
the cartridge port of your 128, allows you to access memory
chips within the device.  In Zelch 128, these devices are
used with RamDos to act as a Ram Disk Drive.

Ram Expansion Unit:  See REU.

Reply:  A comment or response to a posted message which,
when saved, is attached to that message and read along with
it.

SubOp:  A user designated by you with the task of managing
the affairs of a particular message base or U/D base.

SysOp:  The main dude or main dudes responsible for the
operation of your system.  This includes you and any
assistants you trust with the vitals of your board.

System:  This is a broad term referring to your BBS computer
and all of your system peripherals and drives, your BBS
program and all of its modules, and the menus and text
files related to your bulletin board.

System Editor:  See offline editor.

U/D (Upload/Download):  The section of your board dedicated
to the transferring of files via uploading and downloading.
This can also refer to U/D bases, which are sections
dedicated to files of a certain kind.

Upload:  Transferring of a file from the caller to the BBS
using the last protocol loaded.

User:  A caller to your system who has an account/ID
number and some sort of access.

User ID:  See account number.
